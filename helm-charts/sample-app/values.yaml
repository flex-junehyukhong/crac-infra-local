# =============================================================================
# Helm Chart 기본 설정값 (values.yaml)
# =============================================================================
# values.yaml은 차트의 기본 설정값을 정의합니다.
# 템플릿에서 .Values.* 로 참조되며, 설치 시 오버라이드 가능합니다.
#
# 설정 오버라이드 방법:
#   1. 커맨드라인: helm install ... --set replicaCount=3
#   2. 파일: helm install ... -f custom-values.yaml
#   3. ArgoCD: Application spec.source.helm.parameters 또는 valueFiles
#
# 우선순위: 커맨드라인 > -f 파일 > values.yaml
# =============================================================================

# -----------------------------------------------------------------------------
# 레플리카 수
# -----------------------------------------------------------------------------
# Deployment에서 실행할 Pod 복제본 수
# 2개로 설정하여 고가용성 확보 (한 Pod 장애 시에도 서비스 유지)
# 프로덕션에서는 최소 2개 이상 권장
replicaCount: 2

# -----------------------------------------------------------------------------
# 컨테이너 이미지 설정
# -----------------------------------------------------------------------------
image:
  # 이미지 저장소 (Docker Hub의 경우 이미지명만 입력)
  # 예: nginx, redis, mysql
  # Private registry: registry.example.com/myapp
  repository: nginx

  # 이미지 태그 (버전)
  # alpine: 경량화된 Alpine Linux 기반 이미지 (~5MB vs 일반 ~140MB)
  # 프로덕션에서는 특정 버전 태그 권장 (예: 1.25.3-alpine)
  tag: alpine

  # 이미지 Pull 정책
  # IfNotPresent: 로컬에 없을 때만 다운로드 (기본값, 권장)
  # Always: 항상 레지스트리에서 다운로드 (latest 태그 사용 시 권장)
  # Never: 로컬 이미지만 사용 (개발 환경용)
  pullPolicy: IfNotPresent

# -----------------------------------------------------------------------------
# 서비스 설정
# -----------------------------------------------------------------------------
service:
  # 서비스 타입
  # ClusterIP: 클러스터 내부에서만 접근 가능 (기본값)
  # NodePort: 각 노드의 특정 포트로 외부 노출 (개발/테스트용)
  # LoadBalancer: 클라우드 로드밸런서 프로비저닝 (프로덕션용)
  type: NodePort

  # 서비스 포트 (클러스터 내부에서 사용하는 포트)
  port: 80

  # NodePort 번호 (30000-32767 범위)
  # Kind 클러스터의 extraPortMappings와 일치해야 외부 접근 가능
  # http://localhost:30000 으로 접근
  nodePort: 30000

# -----------------------------------------------------------------------------
# 리소스 제한 설정
# -----------------------------------------------------------------------------
# 컨테이너의 CPU와 메모리 사용량 제한
# 적절한 리소스 제한은 클러스터 안정성에 필수
resources:
  # 상한선 (Limits): 컨테이너가 사용할 수 있는 최대 리소스
  # 이 값을 초과하면 CPU는 쓰로틀링, 메모리는 OOM Kill 발생
  limits:
    # CPU 100m = 0.1 CPU 코어 (1000m = 1 코어)
    cpu: 100m
    # 메모리 128MiB (메비바이트)
    memory: 128Mi

  # 요청량 (Requests): 스케줄링 시 보장받는 최소 리소스
  # 노드 선택 시 이 값을 기준으로 여유 공간 확인
  requests:
    cpu: 50m
    memory: 64Mi
